sudo: required

language: generic

services:
  - docker

script:
  - docker --version  # document the version travis is using
  - docker-compose -f src/Docker/docker-compose.yml -f src/Docker/docker-compose.release.yml -p donut config
  - docker-compose -f src/Docker/docker-compose.yml -f src/Docker/docker-compose.release.yml -p donut build
  - export DOCKER_TLS_VERIFY=0
  - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
  - docker tag donut:latest leomastermind/donut:0.1.0
  - docker push leomastermind/donut:0.1.0